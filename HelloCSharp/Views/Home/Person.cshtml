@using HelloCSharp.Database
@using HelloCSharp.Models
@{
    ViewBag.I18N_Name = "Name";
    ViewBag.I18N_Age = "Alter";
    ViewBag.I18N_City = "Wohnort";
    ViewBag.I18N_Relationships = "Beziehungen";
}

<h2>@ViewBag.Title</h2>

@if (@ViewBag.Id == null) {
    <table>
        <tr>
            <th>@ViewBag.I18N_Name</th>
            <th>@ViewBag.I18N_Age</th>
            <th>@ViewBag.I18N_City</th>
            <th>@ViewBag.I18N_Relationships</th>
        </tr>
        @foreach(var person in @ViewBag.Persons) {
            <tr>
                <td><a href="/Home/Person/@person.Id">@person.Name</a></td>
                <td>@person.Age</td>
                <td><a href="/Home/City/@person.City.Id">@person.City.Name</a></td>
                <td>@Database.GetInstance().RelationshipRepository.FindByPersonId(person.Id).Count</td>
            </tr>
        }
    </table>
}
else
{
    <table>
        <tr>
            <th>@ViewBag.I18N_Name</th>
            <td>@ViewBag.Person.Name</td>
        </tr>
        <tr>
            <th>@ViewBag.I18N_Age</th>
            <td>@ViewBag.Person.Age</td>
        </tr>
        <tr>
            <th>@ViewBag.I18N_City</th>
            <td><a href="/Home/City/@ViewBag.Person.City.Id">@ViewBag.Person.City.Name</a></td>
        </tr>
        <tr>
            <th>@ViewBag.I18N_Relationships</th>
            <td>
                <ul class="simple-ul">
                    @foreach (var relationship in @Database.GetInstance().RelationshipRepository.FindByPersonId(ViewBag.Person.Id))
                    {
                        <li><a href="/Home/Person/@relationship.FromId">@relationship.FromName</a> @RelationshipTypeMethods.Message(relationship.Type) <a href="/Home/Person/@relationship.ToId">@relationship.ToName</a></li>
                    }
                </ul>
            </td>
        </tr>
    </table>
    
    <a href="/Home/Person/">Zu&uuml;ck</a>
}